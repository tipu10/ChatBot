{"version":3,"sources":["../../src/webchat/webchat-dev.jsx"],"names":["DebugTab","styled","div","props","show","DebugTabPortal","webchatHooks","document","body","initialSession","is_first_interaction","last_session","user","id","username","name","provider","PROVIDER","DEV","provider_id","extra_data","organization","bot","WebchatDev","ref","webchatState","updateTheme","theme","flex","position","keepSessionOnReload","devSettings","showSessionView"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;AAEO,IAAMA,QAAQ,GAAGC,6BAAOC,GAAV,qKAIV,UAAAC,KAAK;AAAA,SAAKA,KAAK,CAACC,IAAN,GAAa,OAAb,GAAuB,MAA5B;AAAA,CAJK,EAKT,UAAAD,KAAK;AAAA,SAAKA,KAAK,CAACC,IAAN,GAAa,MAAb,GAAsB,MAA3B;AAAA,CALI,CAAd,C,CAQP;AACA;;;;;AACO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,MAAGC,YAAH,QAAGA,YAAH;AAAA,MAAoBH,KAApB;AAAA,sBAC5B,0CACE,gCAAC,QAAD,EAAcA,KAAd,eACE,gCAAC,wBAAD;AAAa,IAAA,YAAY,EAAEG;AAA3B,IADF,CADF,EAIEC,QAAQ,CAACC,IAJX,CAD4B;AAAA,CAAvB;;;AAQP,IAAMC,cAAc,GAAG;AACrBC,EAAAA,oBAAoB,EAAE,IADD;AAErBC,EAAAA,YAAY,EAAE,EAFO;AAGrBC,EAAAA,IAAI,EAAE;AACJC,IAAAA,EAAE,EAAE,QADA;AAEJC,IAAAA,QAAQ,EAAE,SAFN;AAGJC,IAAAA,IAAI,EAAE,UAHF;AAIJC,IAAAA,QAAQ,EAAEC,eAASC,GAJf;AAKJC,IAAAA,WAAW,EAAE,SALT;AAMJC,IAAAA,UAAU,EAAE;AANR,GAHe;AAWrBC,EAAAA,YAAY,EAAE,EAXO;AAYrBC,EAAAA,GAAG,EAAE;AACHT,IAAAA,EAAE,EAAE,SADD;AAEHE,IAAAA,IAAI,EAAE;AAFH;AAZgB,CAAvB,C,CAkBA;;AACO,IAAMQ,UAAU,gBAAG,uBAAW,UAACpB,KAAD,EAAQqB,GAAR,EAAgB;AACnD,MAAMlB,YAAY,GAAG,wBAArB;AACA,MAAQmB,YAAR,GAAsCnB,YAAtC,CAAQmB,YAAR;AAAA,MAAsBC,WAAtB,GAAsCpB,YAAtC,CAAsBoB,WAAtB;AAEA;AACF;AACA;;AACE,wBAAU,YAAM;AACdA,IAAAA,WAAW,CAAC,wBAAMD,YAAY,CAACE,KAAnB,EAA0BxB,KAAK,CAACwB,KAAhC,CAAD,CAAX;AACD,GAFD,EAEG,CAACxB,KAAK,CAACwB,KAAP,CAFH;AAIA,sBACE,+EACE,gCAAC,gBAAD;AACE,IAAA,KAAK,EAAE;AAAEC,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,QAAQ,EAAE;AAArB;AADT,KAEM1B,KAFN;AAGE,IAAA,GAAG,EAAEqB,GAHP;AAIE,IAAA,YAAY,EAAElB,YAJhB;AAKE,IAAA,cAAc,EAAEG,cALlB;AAME,IAAA,kBAAkB,EAAE;AAClBqB,MAAAA,mBAAmB,EAAEL,YAAY,CAACM,WAAb,CAAyBD,mBAD5B;AAElBE,MAAAA,eAAe,EAAEP,YAAY,CAACM,WAAb,CAAyBC;AAFxB;AANtB,KADF,eAYE,gCAAC,cAAD;AACE,IAAA,IAAI,EAAEP,YAAY,CAACM,WAAb,CAAyBC,eADjC;AAEE,IAAA,YAAY,EAAE1B;AAFhB,IAZF,CADF;AAmBD,CA9ByB,CAAnB","sourcesContent":["import { PROVIDER } from '@botonic/core'\nimport merge from 'lodash.merge'\nimport React, { forwardRef, useEffect } from 'react'\nimport { createPortal } from 'react-dom'\nimport styled from 'styled-components'\n\nimport { useWebchat } from './hooks'\nimport { SessionView } from './session-view'\nimport { Webchat } from './webchat'\n\nexport const DebugTab = styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: ${props => (props.show ? '350px' : '32px')};\n  height: ${props => (props.show ? '100%' : '42px')};\n`\n\n// We want the debug tab to be rendered in the <body> even if the\n// webchat is being rendered in a shadowDOM, that's why we need a portal\nexport const DebugTabPortal = ({ webchatHooks, ...props }) =>\n  createPortal(\n    <DebugTab {...props}>\n      <SessionView webchatHooks={webchatHooks} />\n    </DebugTab>,\n    document.body\n  )\n\nconst initialSession = {\n  is_first_interaction: true,\n  last_session: {},\n  user: {\n    id: '000001',\n    username: 'johndoe',\n    name: 'John Doe',\n    provider: PROVIDER.DEV,\n    provider_id: '0000000',\n    extra_data: {},\n  },\n  organization: '',\n  bot: {\n    id: '0000000',\n    name: 'botName',\n  },\n}\n\n// eslint-disable-next-line react/display-name\nexport const WebchatDev = forwardRef((props, ref) => {\n  const webchatHooks = useWebchat()\n  const { webchatState, updateTheme } = webchatHooks\n\n  /* TODO: webchatState.theme should be included in the dependencies array\n  together with props.theme. The problem is that this effect modifies webchatState\n  so we enter an infinite rerender loop. */\n  useEffect(() => {\n    updateTheme(merge(webchatState.theme, props.theme))\n  }, [props.theme])\n\n  return (\n    <>\n      <Webchat\n        style={{ flex: 1, position: 'relative' }}\n        {...props}\n        ref={ref}\n        webchatHooks={webchatHooks}\n        initialSession={initialSession}\n        initialDevSettings={{\n          keepSessionOnReload: webchatState.devSettings.keepSessionOnReload,\n          showSessionView: webchatState.devSettings.showSessionView,\n        }}\n      />\n      <DebugTabPortal\n        show={webchatState.devSettings.showSessionView}\n        webchatHooks={webchatHooks}\n      />\n    </>\n  )\n})\n"],"file":"webchat-dev.js"}